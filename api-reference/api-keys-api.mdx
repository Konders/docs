---
title: API Keys API
description: Create and manage API keys. Requires JWT session (staff panel login).
---

<Note>
  These endpoints require a JWT Bearer token from the staff panel session — **not** an API key. They are used to manage API keys themselves.
</Note>

## Create API Key

```bash
POST /api/v1/api-keys
Authorization: Bearer <JWT>
Content-Type: application/json
```

### Request Body

```json
{
  "name": "My CRM Integration",
  "type": "personal",
  "expiresAt": "2027-01-01T00:00:00Z"
}
```

For branch keys:

```json
{
  "name": "Branch East Integration",
  "type": "branch",
  "branchId": 1
}
```

`type=branch` requires superadmin permissions.

### Response

```json
{
  "id": "3fa85f64-...",
  "keyPrefix": "sk_personal_Ab3xQw",
  "name": "My CRM Integration",
  "type": "personal",
  "isActive": true,
  "rawKey": "sk_personal_Ab3xQwxxxxxxxxxxxxxxxxxxxxxxxx",
  "note": "Store this key securely — it will not be shown again."
}
```

---

## List API Keys

```bash
GET /api/v1/api-keys
Authorization: Bearer <JWT>
```

Returns your API keys. Superadmins also see branch keys for their branch. The `keyHash` is never included. Only `keyPrefix` is shown for identification.

---

## Update API Key

Rename or toggle a key's active state.

```bash
PATCH /api/v1/api-keys/:id
Authorization: Bearer <JWT>
Content-Type: application/json
```

```json
{
  "name": "Renamed Key",
  "isActive": false
}
```

---

## Revoke API Key

```bash
DELETE /api/v1/api-keys/:id
Authorization: Bearer <JWT>
```

Returns `204 No Content`. Revoked keys are soft-deleted and immediately rejected by the API.
